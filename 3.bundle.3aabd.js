(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{626:function(t,e,n){var o,a=(o=n(627))&&o.__esModule?o:{default:o};Object.defineProperty(e,"CoreNavigation",{enumerable:!0,get:function(){return a.default}})},627:function(t,e,n){"use strict";n.r(e);n(628);var o=n(629),a=n(8),i=n.n(a),r=(n(630),n(631)),c=(n(369),n(151)),l=(n(152),n(51)),s=n(22),u=n.n(s),p=n(34),m=n.n(p),d=n(622),f=n.n(d),g=n(623),v=n.n(g),h=n(621),y=n.n(h),C=n(624),b=n.n(C),F=n(43),I=n.n(F),x=n(2),E=n.n(x),A=n(0),S=n.n(A),k=n(4),N=n.n(k),D=n(15),M={icon:"icon",text:"text",button:"button"},w={quit:"quit",back:"back",push:"push",custom:"custom"},P={QuitTextAction:{type:M.text,text:"取消",action:w.quit},QuitIconAction:{type:M.icon,icon:"left",action:w.quit},BackIconAction:{type:M.icon,icon:"left",action:w.back},CustomPushAction:{type:M.text,text:"编辑",url:"/Update",action:w.push},CustomTextAction:{type:M.text,text:"提交/编辑/保存",action:w.custom,callback:function(t){console.log(t)}}},B=function(t){function e(t){var n;return u()(this,e),n=f()(this,v()(e).call(this)),I()(y()(n),"onGoBack",function(){D.b.navigationGoBack({},void 0,function(){console.log("移动端尚未初始化，退出功能未注册")}),n.props.history.privateHistory.goBack()}),I()(y()(n),"onGoPush",function(t){n.props.history.privateHistory.push(t)}),I()(y()(n),"onQuit",function(){D.b.quitToNavigation({},void 0,function(){l.a.fail("移动端尚未初始化，退出功能未注册")})}),I()(y()(n),"renderItemAction",function(t){var e=t.action,o=t.url,a=t.callback;return e===w.quit?n.onQuit:e===w.back?n.onGoBack:e===w.push&&E.a.not.empty(o)?function(){n.onGoPush(o)}:e===w.custom&&E.a.existy(a)?a:function(){}}),I()(y()(n),"renderItemContent",function(t){var e=t.type;return e===M.icon&&E.a.not.empty(t.icon)?N.a.createElement(c.a,{type:t.icon,size:"lg"}):e===M.text&&E.a.not.empty(t.text)?N.a.createElement("span",null,t.text):e===M.button&&E.a.not.empty(t.text)?N.a.createElement(r.a,{type:t.buttonType,size:"small"},t.text):N.a.createElement("span",null)}),I()(y()(n),"renderNavigationItem",function(t){if(!E.a.not.existy(t)&&!E.a.empty(t))return N.a.createElement("div",{role:"presentation",onClick:n.renderItemAction(t)},n.renderItemContent(t))}),I()(y()(n),"render",function(){var t=n.state,e=t.title,a=t.leftItem,r=t.rightItem,c=t.style,l={mode:"light",leftContent:n.renderNavigationItem(a),rightContent:n.renderNavigationItem(r),style:i()({position:"fixed",zIndex:999,left:0,top:0,right:0},c)};return N.a.createElement(o.a,l,e)}),n.state={title:t.title?t.title:"",leftItem:t.leftItem?t.leftItem:void 0,rightItem:t.rightItem?t.rightItem:void 0,style:t.style?t.style:{}},n}return b()(e,t),m()(e,[{key:"componentWillReceiveProps",value:function(t){var e={title:t.title?t.title:"",leftItem:t.leftItem?t.leftItem:void 0,rightItem:t.rightItem?t.rightItem:void 0,style:t.style?t.style:{}};this.setState(e)}}]),e}(k.Component);I()(B,"propTypes",{history:S.a.object.isRequired,leftItem:S.a.object,rightItem:S.a.object,title:S.a.string,style:S.a.object}),I()(B,"defaultProps",{leftItem:{},rightItem:{},title:"",style:{}}),B.CoreNavigationItemType=M,B.CoreNavigationAction=w,B.CoreNavigationItems=P,e.default=B},653:function(t,e,n){var o=n(713);"string"==typeof o&&(o=[[t.i,o,""]]);var a={hmr:!0,transform:void 0,insertInto:void 0};n(66)(o,a);o.locals&&(t.exports=o.locals)},711:function(t,e,n){t.exports=n.p+"d1ea1eeafef73c569e03a367e103f43c.png"},712:function(t,e,n){t.exports=n.p+"74c24d76847ecc6fa2afd66a641b6fdf.png"},713:function(t,e,n){(e=t.exports=n(65)(!1)).push([t.i,"._1AnA1NpCSDYv9ZYp4KsDgU {\n  background-color: #FED783;\n}\n._3Q2jK1VGYi_R7Z0h8VKpJe {\n  position: absolute;\n  margin-top: 41%;\n  width: 100%;\n  text-align: center;\n}\n._1m9L_QBVUnRde8J24CZpdh {\n  width: fit-content;\n  margin: auto;\n  padding: 2% 5%;\n  font-family: PingFangSC-Medium;\n  font-size: 0.22rem;\n  color: #FF1614;\n  letter-spacing: 0;\n  text-align: center;\n  background-color: #F8EA15;\n  border-radius: 0.05rem;\n}\n._1yMd1dFot4j9gpxINn8DXB {\n  width: fit-content;\n  margin: auto;\n  padding: 2% 5%;\n  font-family: PingFangSC-Medium;\n  font-size: 0.22rem;\n  color: #17CB5C;\n  letter-spacing: 0;\n  text-align: center;\n  background-color: #FFFFFF;\n  border-radius: 0.05rem;\n}\n._2pp-caLfyeiBxsIJjST9LY {\n  position: absolute;\n  margin-top: 66%;\n  width: 100%;\n  font-family: PingFangSC-Medium;\n  font-size: 0.39rem;\n  color: #E00002;\n  letter-spacing: 0;\n  text-align: center;\n  line-height: 0.5rem;\n}\n.ooKCItMxli3v6J4l_YuWc {\n  position: absolute;\n  margin-top: 113.5%;\n  width: 100%;\n  font-family: PingFangSC-Medium;\n  font-size: 0.16rem;\n  color: #FFFFFF;\n  letter-spacing: -0.39px;\n  text-align: center;\n  line-height: 0.16rem;\n}\n._1bXHA8UDZU-E2zrF0kJy4T {\n  position: absolute;\n  margin-top: 121%;\n  width: 80%;\n  padding: 0 10%;\n}\n._1qZvPlS-Y91oUwKvig7-e2 {\n  opacity: 0.9;\n  font-family: PingFangSC-Regular;\n  font-size: 0.14rem;\n  color: #FE1313;\n  line-height: 0.35em;\n}\n",""]),e.locals={"page-container":"_1AnA1NpCSDYv9ZYp4KsDgU","page-button-container":"_3Q2jK1VGYi_R7Z0h8VKpJe","page-button":"_1m9L_QBVUnRde8J24CZpdh","page-button-selected":"_1yMd1dFot4j9gpxINn8DXB","page-count-down-font":"_2pp-caLfyeiBxsIJjST9LY","page-info-title":"ooKCItMxli3v6J4l_YuWc","page-info-content":"_1bXHA8UDZU-E2zrF0kJy4T","page-info-content-text":"_1qZvPlS-Y91oUwKvig7-e2"}},714:function(t,e,n){t.exports=n.p+"ce837ac1329b0a66a4c640d807ebd9ce.png"},749:function(t,e,n){"use strict";n.r(e);var o=n(22),a=n.n(o),i=n(34),r=n.n(i),c=n(622),l=n.n(c),s=n(623),u=n.n(s),p=n(621),m=n.n(p),d=n(624),f=n.n(d),g=n(43),v=n.n(g),h=n(2),y=n.n(h),C=n(11),b=n.n(C),F=n(1),I=n.n(F),x=n(150),E=n(4),A=n.n(E),S=n(0),k=n.n(S),N=n(15),D=n(626),M=n(711),w=n.n(M),P=n(712),B=n.n(P),_=(n(639),n(640)),R=n(653),q=n.n(R),T=n(714),j=n.n(T);var z=function(t){function e(t){var n;return a()(this,e),n=l()(this,u()(e).call(this,t)),v()(m()(n),"onDisplay",function(){return function(t){t.preventDefault(),n.setState({isDisplay:!0}),(0,n.props.dispatch)({type:"activities/createAppointmentInfo",payload:{accountId:b.a.get(N.a,"AccountId",""),onSuccessCallback:n.onSuccessCallback,onFailureCallback:n.onFailureCallback}})}}),v()(m()(n),"onSuccessCallback",function(t){n.setState({isDisplay:!0})}),v()(m()(n),"onFailureCallback",function(t){console.log("预约失败")}),v()(m()(n),"onClose",function(){return function(){n.setState({isDisplay:!1})}}),v()(m()(n),"onCloseFinished",function(){console.log("弹窗关闭后的调用");var t=n.props.onReloadPage;t&&(console.log("预约后重新加载页面"),t())}),v()(m()(n),"onWrapTouchStart",function(t){/iPhone|iPod|iPad/i.test(navigator.userAgent)&&(function(t,e){for(var n=t.matches||t.webkitMatchesSelector||t.mozMatchesSelector||t.msMatchesSelector;t;){if(n.call(t,e))return t;t=t.parentElement}return null}(t.target,".am-modal-content")||t.preventDefault())}),v()(m()(n),"renderButton",function(){return A.a.createElement("div",{className:q.a["page-button"],onClick:n.onDisplay()},"立即预约")}),v()(m()(n),"renderModal",function(){var t=n.state.isRequestFailure,e="预约成功",o=A.a.createElement("div",null,A.a.createElement("img",{style:{width:".56rem",margin:"auto"},src:j.a,alt:""}),A.a.createElement("div",null,A.a.createElement("span",{style:{fontSize:".4rem",color:"rgba(239,61,49,1)",marginRight:".05rem"}},"+100"),A.a.createElement("span",{style:{fontSize:".14rem",color:"rgba(0,0,0,1)"}},"积分"))),a=[{text:"我知道了",onPress:function(){n.onClose()()}}];return t&&(e="预约失败",o=A.a.createElement("div",null,"请求服务器失败")),A.a.createElement(_.a,{visible:n.state.isDisplay,transparent:!0,maskClosable:!1,onClose:n.onClose(),title:e,footer:a,wrapProps:{onTouchStart:n.onWrapTouchStart},afterClose:n.onCloseFinished},A.a.createElement("div",{style:{height:"1.3rem",overflow:"scroll"}},o))}),n.state={isDisplay:!1,isRequestFailure:!1},n}return f()(e,t),r()(e,[{key:"render",value:function(){return A.a.createElement("div",null,this.renderButton(),this.renderModal())}}]),e}(E.Component);v()(z,"propTypes",{dispatch:k.a.func.isRequired,history:k.a.object.isRequired,onReloadPage:k.a.func});var U=Object(x.connect)()(z),J=D.CoreNavigation.CoreNavigationItemType,Y=D.CoreNavigation.CoreNavigationAction,K=function(t){function e(t){var n;return a()(this,e),n=l()(this,u()(e).call(this)),v()(m()(n),"onFetchAppointmentInfo",function(t){var e=n.props.dispatch,o={accountId:t};e({type:"activities/fetchAppointmentInfo",payload:o}),e({type:"activities/fetchAppointmentCount",payload:o})}),v()(m()(n),"isActiveStart",function(){return I()().isAfter("2019-11-27 23:59:59")}),v()(m()(n),"isActiveFinished",function(){return I()().isAfter("2019-11-30 23:59:59")}),v()(m()(n),"onReloadPage",function(){var t=n.state.reloadCount,e=N.a.AccountId;n.setState({reloadCount:t+1}),n.onFetchAppointmentInfo(e)}),v()(m()(n),"renderCountDown",function(){if(n.isActiveFinished())return 0;var t=I()().date();return console.log(t),30-t+1}),v()(m()(n),"renderName",function(){var t="王,李,张,刘,陈,杨,黄,赵,吴,周,徐,孙,马,朱,胡,郭,何,高,林,郑,梁,谢,宋,唐,许,韩,冯,邓,曹,彭,曾,肖,田,董,袁,潘,于,蔡,余,杜,叶程,苏,魏,吕,丁,沈,姚,卢,姜,崔,谭,汪,范,金".split(","),e="".concat(t[Math.floor(Math.random()*t.length)],"xx"),n=I()().format("MM月DD日"),o=I()().subtract(Math.floor(5*Math.random()+1),"hour").format("HH"),a=I()().subtract(Math.floor(59*Math.random()+1),"minute").format("mm"),i=I()().subtract(Math.floor(59*Math.random()+1),"second").format("mm");return"".concat(e," ").concat(n," ").concat(o,":").concat(a,":").concat(i," 预约成功")}),v()(m()(n),"renderNavigation",function(){var t={type:J.icon,icon:"left",action:Y.quit},e={title:A.a.createElement("span",{style:{color:"#FFFDE6"}},"预支服务费"),history:n.props.history,leftItem:t,style:{backgroundColor:"#FE552B",color:"#FFFDE6"}};return A.a.createElement(D.CoreNavigation,e)}),v()(m()(n),"renderButton",function(){var t=n.state.isAppointment;return!1===n.isActiveStart()?"":!1===t?A.a.createElement(U,{history:n.props.history,onReloadPage:n.onReloadPage}):A.a.createElement("div",{className:q.a["page-button-selected"]},A.a.createElement("span",{style:{textAlgin:"center",lineHeight:".3rem"}},A.a.createElement("img",{style:{width:".25rem"},src:B.a,alt:""})),A.a.createElement("span",{style:{marginLeft:".08rem"}},"预约成功"))}),v()(m()(n),"renderContent",function(){var t=n.state.appointmentCount;return A.a.createElement("div",null,A.a.createElement("div",{className:q.a["page-button-container"]},n.renderButton()),A.a.createElement("div",{className:q.a["page-count-down-font"]},n.renderCountDown()),n.isActiveStart()?A.a.createElement("div",{className:q.a["page-info-title"]},"已有".concat(t,"用户预约")):A.a.createElement("div",{className:q.a["page-info-title"]},"预约火热筹备中"),n.isActiveStart()?A.a.createElement("div",{className:q.a["page-info-content"]},A.a.createElement("p",{className:q.a["page-info-content-text"]},n.renderName()),A.a.createElement("p",{className:q.a["page-info-content-text"]},n.renderName()),A.a.createElement("p",{className:q.a["page-info-content-text"]},n.renderName())):"",A.a.createElement("img",{src:w.a,alt:"",style:{width:"100%"}}))}),n.state={reloadCount:0,appointmentCount:b.a.get(t,"activities.appointmentCount",0),isAppointment:b.a.get(t,"activities.isAppointment",!1)},n}return f()(e,t),r()(e,[{key:"componentDidMount",value:function(){var t=N.a.AccountId;y.a.not.empty(t)&&y.a.existy(t)&&this.onFetchAppointmentInfo(t),N.b.updateStateBarColor({color:"FE552B"},void 0,function(){console.log("componentDidMount updateStateBarColor 移动端尚未初始化，操作失败")})}},{key:"componentWillReceiveProps",value:function(t){var e={appointmentCount:b.a.get(t,"activities.appointmentCount",0),isAppointment:b.a.get(t,"activities.isAppointment",!1)};this.setState(e)}},{key:"componentWillUnmount",value:function(){N.b.updateStateBarColor({color:"FFFFFF"},void 0,function(){console.log("componentWillUnmount updateStateBarColor 移动端尚未初始化，操作失败")})}},{key:"render",value:function(){var t=this.state.reloadCount;return console.log("页面刷新计数: ".concat(t)),A.a.createElement("div",{className:q.a["page-container"]},this.renderNavigation(),this.renderContent())}}]),e}(E.Component);v()(K,"propTypes",{dispatch:k.a.func.isRequired,history:k.a.object.isRequired});e.default=Object(x.connect)(function(t){return{activities:t.activities}})(K)}}]);