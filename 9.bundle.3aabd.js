(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{625:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});var i={sign:10,lottery:20,description:function(e){switch(Number(e)){case this.sign:return"每日签到领奖(签到)";case this.lottery:return"抽奖奖励(活动)";default:return"未定义"}}},o={PageHomeOpened:"PageHomeOpened",PageHomeViewed:"PageHomeViewed",PageSignOpened:"PageSignOpened",PageSignViewed:"PageSignViewed",PageScoreOpened:"PageScoreOpened",PageScoreViewed:"PageScoreViewed",PageScoreDetailOpened:"PageScoreDetailOpened",PageScoreDetailViewed:"PageScoreDetailViewed",PageScoreRankOpened:"PageScoreRankOpened",PageScoreRankViewed:"PageScoreRankViewed",PageSignDescriptionOpened:"PageSignDescriptionOpened",PageSignDescriptionViewed:"PageSignDescriptionViewed",PageAppointmentOpened:"PageAppointmentOpened",PageAppointmentViewed:"PageAppointmentViewed",PageActivity20191204Opened:"PageActivity20191204Opened",PageActivity20191204Viewed:"PageActivity20191204Viewed",PageActivity20191212Opened:"PageActivity20191212Opened",PageActivity20191212Viewed:"PageActivity20191212Viewed",PageActivity20191224Opened:"PageActivity20191224Opened",PageActivity20191224Viewed:"PageActivity20191224Viewed",PageDayDayMoneyOpened:"PageDayDayMoneyOpened",PageDayDayMoneyViewed:"PageDayDayMoneyViewed",PageDayDayMoneyRuleOpened:"PageDayDayMoneyOpened",PageDayDayMoneyRuleViewed:"PageDayDayMoneyViewed",RedirectFromHomeToSignPage:"RedirectFormHomeToSignPage",RedirectFromHomeToActivity20191204:"RedirectFromHomeToActivity20191204",RedirectFromHomeToActivity20191212:"RedirectFromHomeToActivity20191212",RedirectFromScoreToSignPage:"RedirectFromScoreToSignPage",RedirectFromActivity20191204ToScore:"RedirectFromActivity20191204ToScore",RedirectFromActivity20191204ToPuShu:"RedirectFromActivity20191204ToPuShu",RedirectFromActivity20191212ToScore:"RedirectFromActivity20191212ToScore",RedirectFromActivity20191224ToScore:"RedirectFromActivity20191224ToScore",RedirectFromHomeToDayDayMoney:"RedirectFromHomeToDayDayMoney",RedirectFromDayDayMoneyToDayDayMoneyRule:"RedirectFromDayDayMoneyToDayDayMoneyRule",ActionDailySign:"ActionDailySign",ActionAppointmentPayment:"ActionAppointmentPayment",ActionAppointmentTasks:"ActionAppointmentTasks",ActionAppointmentMoneyMaker:"ActionAppointmentMoneyMaker",ActionAppointmentAdvertisement:"ActionAppointmentAdvertisement",ActionActivity20191204:"ActionActivity20191204",ActionActivity20191212:"ActionActivity20191212",ActionActivity20191224:"ActionActivity20191224",ActionDayDayMoneyApplication:"ActionDayDayMoneyApplication"}},626:function(e,t,n){var i,o=(i=n(627))&&i.__esModule?i:{default:i};Object.defineProperty(t,"CoreNavigation",{enumerable:!0,get:function(){return o.default}})},627:function(e,t,n){"use strict";n.r(t);n(628);var i=n(629),o=n(8),a=n.n(o),r=(n(630),n(631)),c=(n(369),n(151)),s=(n(152),n(51)),l=n(22),p=n.n(l),d=n(34),g=n.n(d),u=n(622),m=n.n(u),y=n(623),f=n.n(y),h=n(621),v=n.n(h),b=n(624),A=n.n(b),S=n(43),P=n.n(S),C=n(2),D=n.n(C),F=n(0),R=n.n(F),w=n(4),k=n.n(w),E=n(15),x={icon:"icon",text:"text",button:"button"},T={quit:"quit",back:"back",push:"push",custom:"custom"},I={QuitTextAction:{type:x.text,text:"取消",action:T.quit},QuitIconAction:{type:x.icon,icon:"left",action:T.quit},BackIconAction:{type:x.icon,icon:"left",action:T.back},CustomPushAction:{type:x.text,text:"编辑",url:"/Update",action:T.push},CustomTextAction:{type:x.text,text:"提交/编辑/保存",action:T.custom,callback:function(e){console.log(e)}}},_=function(e){function t(e){var n;return p()(this,t),n=m()(this,f()(t).call(this)),P()(v()(n),"onGoBack",function(){E.b.navigationGoBack({},void 0,function(){console.log("移动端尚未初始化，退出功能未注册")}),n.props.history.privateHistory.goBack()}),P()(v()(n),"onGoPush",function(e){n.props.history.privateHistory.push(e)}),P()(v()(n),"onQuit",function(){E.b.quitToNavigation({},void 0,function(){s.a.fail("移动端尚未初始化，退出功能未注册")})}),P()(v()(n),"renderItemAction",function(e){var t=e.action,i=e.url,o=e.callback;return t===T.quit?n.onQuit:t===T.back?n.onGoBack:t===T.push&&D.a.not.empty(i)?function(){n.onGoPush(i)}:t===T.custom&&D.a.existy(o)?o:function(){}}),P()(v()(n),"renderItemContent",function(e){var t=e.type;return t===x.icon&&D.a.not.empty(e.icon)?k.a.createElement(c.a,{type:e.icon,size:"lg"}):t===x.text&&D.a.not.empty(e.text)?k.a.createElement("span",null,e.text):t===x.button&&D.a.not.empty(e.text)?k.a.createElement(r.a,{type:e.buttonType,size:"small"},e.text):k.a.createElement("span",null)}),P()(v()(n),"renderNavigationItem",function(e){if(!D.a.not.existy(e)&&!D.a.empty(e))return k.a.createElement("div",{role:"presentation",onClick:n.renderItemAction(e)},n.renderItemContent(e))}),P()(v()(n),"render",function(){var e=n.state,t=e.title,o=e.leftItem,r=e.rightItem,c=e.style,s={mode:"light",leftContent:n.renderNavigationItem(o),rightContent:n.renderNavigationItem(r),style:a()({position:"fixed",zIndex:999,left:0,top:0,right:0},c)};return k.a.createElement(i.a,s,t)}),n.state={title:e.title?e.title:"",leftItem:e.leftItem?e.leftItem:void 0,rightItem:e.rightItem?e.rightItem:void 0,style:e.style?e.style:{}},n}return A()(t,e),g()(t,[{key:"componentWillReceiveProps",value:function(e){var t={title:e.title?e.title:"",leftItem:e.leftItem?e.leftItem:void 0,rightItem:e.rightItem?e.rightItem:void 0,style:e.style?e.style:{}};this.setState(t)}}]),t}(w.Component);P()(_,"propTypes",{history:R.a.object.isRequired,leftItem:R.a.object,rightItem:R.a.object,title:R.a.string,style:R.a.object}),P()(_,"defaultProps",{leftItem:{},rightItem:{},title:"",style:{}}),_.CoreNavigationItemType=x,_.CoreNavigationAction=T,_.CoreNavigationItems=I,t.default=_},645:function(e,t,n){"use strict";n(370),n(646)},646:function(e,t,n){var i=n(647);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(66)(i,o);i.locals&&(e.exports=i.locals)},647:function(e,t,n){(e.exports=n(65)(!1)).push([e.i,".am-progress-outer {\n  background-color: #ddd;\n  display: block;\n}\n.am-progress-fixed-outer {\n  position: fixed;\n  width: 100%;\n  top: 0;\n  left: 0;\n  z-index: 2000;\n}\n.am-progress-hide-outer {\n  background-color: transparent;\n}\n.am-progress-bar {\n  border: 2px solid #108ee9;\n  transition: all 0.3s linear 0s;\n}\n",""])},648:function(e,t,n){"use strict";var i=n(44),o=n.n(i),a=n(24),r=n.n(a),c=n(29),s=n.n(c),l=n(30),p=n.n(l),d=n(23),g=n.n(d),u=n(31),m=n.n(u),y=n(38),f=n.n(y),h=n(4),v=function(e){function t(){return s()(this,t),g()(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m()(t,e),p()(t,[{key:"componentWillReceiveProps",value:function(){this.noAppearTransition=!0}},{key:"componentDidMount",value:function(){var e=this;this.props.appearTransition&&setTimeout(function(){e.barRef&&(e.barRef.style.width=e.props.percent+"%")},10)}},{key:"render",value:function(){var e,t=this,n=this.props,i=n.className,a=n.prefixCls,c=n.position,s=n.unfilled,l=n.style,p=void 0===l?{}:l,d=n.barStyle,g=void 0===d?{}:d,u={width:this.noAppearTransition||!this.props.appearTransition?this.props.percent+"%":0,height:0},m=f()(a+"-outer",i,(e={},r()(e,a+"-fixed-outer","fixed"===c),r()(e,a+"-hide-outer",!s),e));return h.createElement("div",{style:p,className:m,role:"progressbar","aria-valuenow":this.props.percent,"aria-valuemin":0,"aria-valuemax":100},h.createElement("div",{ref:function(e){return t.barRef=e},className:a+"-bar",style:o()({},g,u)}))}}]),t}(h.Component);t.a=v,v.defaultProps={prefixCls:"am-progress",percent:0,position:"fixed",unfilled:!0,appearTransition:!1}},649:function(e,t,n){var i=n(650);"string"==typeof i&&(i=[[e.i,i,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};n(66)(i,o);i.locals&&(e.exports=i.locals)},650:function(e,t,n){(t=e.exports=n(65)(!1)).push([e.i,"._35dgJCj1g5eC1mwVdMEYX2 {\n  padding-top: 0.45rem;\n  height: calc(100% - 0.45rem);\n  background: #f9fbfc;\n}\n/*-------------------------------------*/\n/*-------------------------------------*/\n._2miunl9hA7prTUnfia_EFz {\n  margin: auto auto 0.2rem;\n  height: 1.2rem;\n}\n._16B4akJ4BqLVL8sy28pACi {\n  margin-top: 0.8rem;\n  text-align: center;\n  height: 0.28rem;\n  font-size: 0.28rem;\n  font-family: PingFangSC-Semibold, PingFang SC;\n  font-weight: 600;\n  color: #ffec00;\n  line-height: 0.28rem;\n}\n._31cc9jBtGMSGeEEbRVAoYw {\n  margin-top: 0.5rem;\n  text-align: center;\n  height: 0.16rem;\n  font-size: 0.16rem;\n  font-family: PingFangSC-Medium, PingFang SC;\n  font-weight: 500;\n  color: #ffffff;\n  line-height: 0.16rem;\n}\n/*-------------------------------------*/\n._3zf6Z2g6qVvo6f1wBShUeP {\n  position: relative;\n  margin-top: 43%;\n  height: auto;\n  margin-bottom: 5%;\n  padding: 0 3%;\n}\n._1oxs2voCYMc_Xd_mEJ1hbt {\n  margin: 0.1rem auto;\n}\n.tFGKhwytIeoR2Hm4MwjgO {\n  width: 30%;\n  text-align: center;\n  font-size: 0.16rem;\n  font-family: PingFangSC-Medium, PingFang SC;\n  font-weight: 500;\n  color: #ffffff;\n  line-height: 0.16rem;\n}\n._3-2BTNYjr-drAGBBq23XZ {\n  width: 30%;\n  font-size: 0.14rem;\n  font-family: PingFangSC-Medium, PingFang SC;\n  font-weight: 500;\n  color: #ffffff;\n  line-height: 0.16rem;\n}\n._3j7XKxL-JiCJ1xkgonCsEo {\n  width: 30%;\n  margin: 0.05rem;\n  height: 0.66rem;\n  background-color: #FFF;\n}\n.nzc6FGk7Ef5t-ObGuxZ_E {\n  position: relative;\n  margin-top: 2.65rem;\n  padding: 0 12%;\n}\n/*-------------------------------------*/\n._3k76edd_wJAeor3NAA7QQl {\n  position: relative;\n  margin-top: 0.75rem;\n}\n._1TaKaYX0L8ZrFs--4EvS1o {\n  margin: auto;\n  text-align: center;\n  background: #ffec00;\n  border-radius: 0.05rem;\n  width: 50%;\n  height: 0.5rem;\n  font-size: 0.25rem;\n  font-family: PingFangSC-Medium, PingFang SC;\n  font-weight: 500;\n  color: #000000;\n  line-height: 0.5rem;\n}\n._3P9RSHepNyJL9DghttLtKW {\n  position: relative;\n  margin-top: 2.65rem;\n}\n.ZQnCBR3eHRdZr9RPWmzHn {\n  margin: auto;\n  text-align: center;\n  width: 1rem;\n  height: 0.35rem;\n  border-radius: 0.04rem;\n  opacity: 0.8;\n  border: 0.01rem solid #ffffff;\n  font-size: 0.12rem;\n  font-family: PingFangSC-Regular, PingFang SC;\n  font-weight: 400;\n  color: #ffffff;\n  line-height: 0.35rem;\n}\n/*-------------------------------------*/\n/*-------------------------------------*/\n/*-------------------------------------*/\n._3n5i9CndaGE1lYuy3ZHbg7 {\n  padding: 0.45rem 0.2rem 0.47rem;\n  height: calc(100% - 0.45rem - 0.47rem);\n}\n._1O-D-4U1MFhtiIVAHhUPj5 {\n  font-size: 0.16rem;\n  font-family: PingFangSC-Regular, PingFang SC;\n  font-weight: 400;\n  color: #000000;\n  line-height: 0.26rem;\n}\n",""]),t.locals={"sign-container":"_35dgJCj1g5eC1mwVdMEYX2","sign-header-container":"_2miunl9hA7prTUnfia_EFz","sign-header-title":"_16B4akJ4BqLVL8sy28pACi","sign-header-sub-title":"_31cc9jBtGMSGeEEbRVAoYw","sign-progress-content-container":"_3zf6Z2g6qVvo6f1wBShUeP","sign-progress-content":"_1oxs2voCYMc_Xd_mEJ1hbt","sign-progress-content-score-text":"tFGKhwytIeoR2Hm4MwjgO","sign-progress-content-daily-text":"_3-2BTNYjr-drAGBBq23XZ","sign-progress-content-image":"_3j7XKxL-JiCJ1xkgonCsEo","sign-progress-bar-container":"nzc6FGk7Ef5t-ObGuxZ_E","sign-content-button-container":"_3k76edd_wJAeor3NAA7QQl","sign-content-button":"_1TaKaYX0L8ZrFs--4EvS1o","sign-content-description-container":"_3P9RSHepNyJL9DghttLtKW","sign-content-description-button":"ZQnCBR3eHRdZr9RPWmzHn","sign-description-container":"_3n5i9CndaGE1lYuy3ZHbg7","sign-description":"_1O-D-4U1MFhtiIVAHhUPj5"}},698:function(e,t,n){e.exports=n.p+"ce837ac1329b0a66a4c640d807ebd9ce.png"},699:function(e,t,n){e.exports=n.p+"13c23915b8b4f5b7740a0be79a40d98b.png"},700:function(e,t,n){e.exports=n.p+"007dad936e99da3fb26d8a4734673071.png"},701:function(e,t,n){e.exports=n.p+"ef7906110e8d0d35cf4810d5bf7e206c.png"},702:function(e,t,n){e.exports=n.p+"336d1e81682cbfd8d8cfff990f1b242a.png"},748:function(e,t,n){"use strict";n.r(t);n(645);var i=n(648),o=n(22),a=n.n(o),r=n(34),c=n.n(r),s=n(622),l=n.n(s),p=n(623),d=n.n(p),g=n(621),u=n.n(g),m=n(624),y=n.n(m),f=n(43),h=n.n(f),v=n(11),b=n.n(v),A=n(150),S=n(4),P=n.n(S),C=n(0),D=n.n(C),F=n(625),R=n(626),w=n(15),k=n(649),E=n.n(k),x=(n(639),n(640)),T=(n(152),n(51)),I=n(698),_=n.n(I);var M=function(e){function t(e){var n;return a()(this,t),n=l()(this,d()(t).call(this,e)),h()(u()(n),"onDisplay",function(){return function(e){e.preventDefault();var t=n.props.dispatch;t({type:"score/updateScoreByDailySign",payload:{accountId:b.a.get(w.a,"AccountId",""),onSuccessCallback:n.onSuccessCallback,onFailureCallback:n.onFailureCallback}}),t({type:"applicationAnalysis/createEventRecord",payload:{key:F.a.ActionDailySign}})}}),h()(u()(n),"onSuccessCallback",function(e){n.setState({isDisplay:!0,score:b.a.get(e,"score_num",0),signCount:b.a.get(e,"today_clock_in_count",0)});var t=b.a.get(w.a,"AccountId","");(0,n.props.dispatch)({type:"score/fetchScore",payload:{accountId:t}})}),h()(u()(n),"onFailureCallback",function(e){T.a.fail("签到失败",3)}),h()(u()(n),"onClose",function(){return function(){n.setState({isDisplay:!1})}}),h()(u()(n),"onCloseFinished",function(){console.log("弹窗关闭后的调用"),n.setState({score:0});var e=n.props.onReloadPage;e&&(console.log("签到后重新加载页面"),e())}),h()(u()(n),"onWrapTouchStart",function(e){/iPhone|iPod|iPad/i.test(navigator.userAgent)&&(function(e,t){for(var n=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;e;){if(n.call(e,t))return e;e=e.parentElement}return null}(e.target,".am-modal-content")||e.preventDefault())}),h()(u()(n),"renderButton",function(){return P.a.createElement("div",{onClick:n.onDisplay(),style:{height:".5rem",lineHeight:".5rem"}},"签到")}),h()(u()(n),"renderModal",function(){var e=n.state,t=e.isRequestFailure,i=e.score,o=e.signCount,a=void 0===o?0:o,r="签到成功",c=P.a.createElement("div",null,P.a.createElement("img",{style:{width:".56rem",margin:"auto"},src:_.a,alt:""}),P.a.createElement("div",null,P.a.createElement("span",{style:{fontSize:".4rem",color:"rgba(239,61,49,1)",marginRight:".05rem"}},"+",i),P.a.createElement("span",{style:{fontSize:".14rem",color:"rgba(0,0,0,1)"}},"积分"),P.a.createElement("br",null),a>0?P.a.createElement("span",{style:{fontSize:".12rem",color:"rgba(0, 0, 0, 0.46)"}},"已签到".concat(a,"人")):"")),s=[{text:"我知道了",onPress:function(){n.onClose()()}}];return t&&(r="签到失败",c=P.a.createElement("div",null,"请求服务器失败")),P.a.createElement(x.a,{visible:n.state.isDisplay,transparent:!0,maskClosable:!1,onClose:n.onClose(),title:r,footer:s,wrapProps:{onTouchStart:n.onWrapTouchStart},afterClose:n.onCloseFinished},P.a.createElement("div",{style:{height:"1.5rem",overflow:"scroll"}},c))}),n.state={isDisplay:!1,isRequestFailure:!1,score:0,signCount:0},n}return y()(t,e),c()(t,[{key:"render",value:function(){return P.a.createElement("div",null,this.renderButton(),this.renderModal())}}]),t}(S.Component);h()(M,"propTypes",{dispatch:D.a.func.isRequired,history:D.a.object.isRequired,onReloadPage:D.a.func});var O=Object(A.connect)()(M),V=n(699),N=n.n(V),B=n(700),H=n.n(B),z=n(701),j=n.n(z),q=n(702),G=n.n(q),J=R.CoreNavigation.CoreNavigationItemType,Z=R.CoreNavigation.CoreNavigationAction,L=function(e){function t(e){var n;return a()(this,t),n=l()(this,d()(t).call(this)),h()(u()(n),"onDirectToDescription",function(){n.props.dispatch({type:"applicationAnalysis/createEventRecord",payload:{key:F.a.RedirectFromSignToSignDesc}}),n.props.history.privateHistory.push("/Manage/Sign/Description")}),h()(u()(n),"onReloadPage",function(){(0,n.props.dispatch)({type:"score/fetchSignInfo",payload:{accountId:b.a.get(w.a,"AccountId","")}});var e=n.state.reloadCount;n.setState({reloadCount:e+1})}),h()(u()(n),"renderNavigation",function(){var e={type:J.icon,icon:"left",action:Z.back},t={title:P.a.createElement("span",{style:{color:"#FFF"}},"每日签到"),history:n.props.history,leftItem:e,style:{backgroundColor:"#EF3D31",color:"#FFF"}};return P.a.createElement(R.CoreNavigation,t)}),h()(u()(n),"renderContent",function(){var e=n.state,t=e.isSigned,o=e.signDays,a=N.a,r=o/30*100;return r>=10&&r<50&&(a=H.a),r>=50&&r<100&&(a=j.a),r>=100&&(a=G.a),P.a.createElement("div",{className:E.a["sign-content-container"]},P.a.createElement("img",{style:{width:"100%",position:"absolute",top:0},src:a,alt:""}),P.a.createElement("div",{className:E.a["sign-progress-bar-container"]},P.a.createElement(i.a,{style:{borderRadius:".04rem"},barStyle:{border:".02rem solid #0BBE50"},percent:r,position:"normal"})),P.a.createElement("div",{className:E.a["sign-content-button-container"]},P.a.createElement("div",{className:E.a["sign-content-button"]},t?"已签到":P.a.createElement(O,{history:n.props.history,onReloadPage:n.onReloadPage}))),P.a.createElement("div",{className:E.a["sign-content-description-container"]},P.a.createElement("div",{className:E.a["sign-content-description-button"],onClick:n.onDirectToDescription}," 签到说明 ")))}),n.state={isSigned:b.a.get(e,"score.isSigned",!1),signDays:b.a.get(e,"score.signDays",0),reloadCount:0},e.dispatch({type:"applicationAnalysis/createEventRecord",payload:{key:F.a.PageSignOpened}}),n}return y()(t,e),c()(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"score/fetchSignInfo",payload:{accountId:b.a.get(w.a,"AccountId","")}}),w.b.updateStateBarColor({color:"EF3D31"},void 0,function(){console.log("componentDidMount updateStateBarColor 移动端尚未初始化，操作失败")}),w.b.updateTabsDisplayState({isHide:!0},void 0,function(){console.log("更新tabs隐藏失败")}),e({type:"applicationAnalysis/createEventRecord",payload:{key:F.a.PageSignViewed}})}},{key:"componentWillReceiveProps",value:function(e){var t={isSigned:b.a.get(e,"score.isSigned",!1),signDays:b.a.get(e,"score.signDays",0)};this.setState(t)}},{key:"componentWillUnmount",value:function(){w.b.updateStateBarColor({color:"FFFFFF"},void 0,function(){console.log("componentWillUnmount updateStateBarColor 移动端尚未初始化，操作失败")}),w.b.updateTabsDisplayState({isHide:!1},void 0,function(){console.log("更新tabs显示失败")})}},{key:"render",value:function(){return P.a.createElement("div",{className:E.a["sign-container"]},this.renderNavigation(),this.renderContent())}}]),t}(S.Component);h()(L,"propTypes",{dispatch:D.a.func.isRequired,history:D.a.object.isRequired});t.default=Object(A.connect)(function(e){return{score:e.score}})(L)}}]);